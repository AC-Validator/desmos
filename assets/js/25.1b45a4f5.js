(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{234:function(s,e,t){"use strict";t.r(e);var a=t(0),r=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"migrate-version-0-3-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#migrate-version-0-3-0"}},[s._v("#")]),s._v(" Migrate version 0.3.0")]),s._v(" "),t("p",[s._v("While updating you software from version "),t("code",[s._v("0.2.0")]),s._v(" (or below) to "),t("code",[s._v("0.3.0")]),s._v(", you will need to perform some required actions.")]),s._v(" "),t("p",[s._v("If you do not manage a validator node, please refer only to the "),t("a",{attrs:{href:"#users"}},[s._v('"'),t("em",[s._v("Users")]),s._v('" instructions')]),s._v(". However, if you do manage one please also read the "),t("a",{attrs:{href:"#validators"}},[s._v('"'),t("em",[s._v("Validators")]),s._v('" instructions')]),s._v(". Finally, if you are a developer refer also to the "),t("a",{attrs:{href:"#developers"}},[s._v('"'),t("em",[s._v("Developers")]),s._v('" instructions')])]),s._v(" "),t("h2",{attrs:{id:"users"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#users"}},[s._v("#")]),s._v(" Users")]),s._v(" "),t("h3",{attrs:{id:"migrate-your-keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#migrate-your-keys"}},[s._v("#")]),s._v(" Migrate your keys")]),s._v(" "),t("p",[s._v("Starting with version "),t("code",[s._v("0.3.0")]),s._v(" of the "),t("code",[s._v("desmoscli")]),s._v(" software, local keys are now stored inside a keystore file. While this improves the security of your keys, you are required to migrate to this system manually. In order to do so, run the following command:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("desmoscli keys migrate \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("This will start the migration procedure.")]),s._v(" "),t("p",[s._v("During such procedure you will be asked which keys should be migrated. At a specific point you will also be asked to insert a password for the keybase. This will be the password that you will use to access all the keys from now on.")]),s._v(" "),t("h2",{attrs:{id:"validators"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validators"}},[s._v("#")]),s._v(" Validators")]),s._v(" "),t("p",[s._v("Validators need to remember that they will have to execute the "),t("code",[s._v("migrate")]),s._v(" command during a future chain upgrade. This will be also remembered inside the upgrade procedure guide.")]),s._v(" "),t("p",[s._v("A part from this, a small state change is required after executing the "),t("code",[s._v("export")]),s._v(" command. The state JSON file should have the following top fields:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"app_hash"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"app_state"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"chain_id"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"morpheus-1001"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"consensus_params"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"genesis_time"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-01-14T00:00:00Z"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"validators"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("In order to make sure the migration to "),t("code",[s._v("v0.3.0")]),s._v(" works properly, you need to "),t("strong",[s._v("delete")]),s._v(" the "),t("code",[s._v("consensus_params")]),s._v(" field. You should end up with a state like the following:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"app_hash"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"app_state"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"chain_id"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"morpheus-1001"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"genesis_time"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-01-14T00:00:00Z"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"validators"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"developers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#developers"}},[s._v("#")]),s._v(" Developers")]),s._v(" "),t("p",[s._v("Version "),t("code",[s._v("0.3.0")]),s._v(" brings a lot of new features for dApp developers.")]),s._v(" "),t("h3",{attrs:{id:"messages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#messages"}},[s._v("#")]),s._v(" Messages")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("MSgEditValidator")]),s._v(" now uses "),t("code",[s._v("description")]),s._v(" instead of "),t("code",[s._v("Description")]),s._v(" as a JSON tag")]),s._v(" "),t("li",[t("code",[s._v("MsgCreatePost")]),s._v(" now required SHA-256 values inside the "),t("code",[s._v("subspace")]),s._v(" field instead of plain-text values")])]),s._v(" "),t("h3",{attrs:{id:"cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cli"}},[s._v("#")]),s._v(" CLI")]),s._v(" "),t("ul",[t("li",[s._v("The "),t("code",[s._v("decode-tx")]),s._v(" has been removed. You can use "),t("code",[s._v("decode")]),s._v(" instead.")])]),s._v(" "),t("h3",{attrs:{id:"rest-apis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rest-apis"}},[s._v("#")]),s._v(" REST APIs")]),s._v(" "),t("ul",[t("li",[s._v("There is now a new "),t("code",[s._v("/txs/decode")]),s._v(" endpoint that allows for easier transaction decoding.")]),s._v(" "),t("li",[s._v("All accounts now have a proper JSON serializer, so you want to make sure all the calls to the "),t("code",[s._v("/auth/accounts/{address}")]),s._v(" endpoint run correctly.")]),s._v(" "),t("li",[s._v("The "),t("code",[s._v("balance")]),s._v(" field inside the "),t("code",[s._v("/staking/delegators")]),s._v(" endpoint is now an array of coins instead of a decimal number.")])])])}),[],!1,null,null,null);e.default=r.exports}}]);